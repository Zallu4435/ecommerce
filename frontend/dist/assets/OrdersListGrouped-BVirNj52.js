import{u as C,r as t,aL as P,B as S,j as e,aM as D,aJ as b,aN as m,aO as F,aP as O}from"./index-DNwfBDY0.js";import I from"./index-BBTKOM0z.js";import{I as E}from"./DownloadUtils-Sp_aF8bs.js";const R=()=>{const n=C(),[g,u]=t.useState([]),[h,i]=t.useState(!0),[a,l]=t.useState(1),[s,y]=t.useState(1),[o,p]=t.useState("desc"),k=10;t.useEffect(()=>{f(),window.scrollTo({top:0,behavior:"smooth"})},[a,o]);const f=async()=>{try{i(!0);const r=await I.get(`${P}/orders/orders-grouped`,{params:{page:a,limit:k,sort:o},withCredentials:!0});r.data.success&&(u(r.data.orders),y(r.data.totalPages))}catch(r){console.error("Error fetching orders:",r),S.error("Failed to fetch orders")}finally{i(!1)}},j=()=>{l(r=>Math.max(r-1,1))},v=()=>{l(r=>Math.min(r+1,s))},N=()=>{p(r=>r==="desc"?"asc":"desc"),l(1)},w=r=>({Delivered:"text-emerald-700 bg-emerald-50 dark:bg-emerald-900/30 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-800",Shipped:"text-blue-700 bg-blue-50 dark:bg-blue-900/30 dark:text-blue-400 border border-blue-100 dark:border-blue-800",Processing:"text-amber-700 bg-amber-50 dark:bg-amber-900/30 dark:text-amber-400 border border-amber-100 dark:border-amber-800",Confirmed:"text-blue-700 bg-blue-50 dark:bg-blue-900/30 dark:text-blue-400 border border-blue-100 dark:border-blue-800",Pending:"text-slate-600 bg-slate-100 dark:bg-slate-800 dark:text-slate-400 border border-slate-200 dark:border-slate-700",Cancelled:"text-red-700 bg-red-50 dark:bg-red-900/30 dark:text-red-400 border border-red-100 dark:border-red-800","Partially Cancelled":"text-orange-700 bg-orange-50 dark:bg-orange-900/30 dark:text-orange-400 border border-orange-100 dark:border-orange-800","Partially Delivered":"text-teal-700 bg-teal-50 dark:bg-teal-900/30 dark:text-teal-400 border border-teal-100 dark:border-teal-800",Returned:"text-purple-700 bg-purple-50 dark:bg-purple-900/30 dark:text-purple-400 border border-purple-100 dark:border-purple-800",Failed:"text-red-700 bg-red-50 dark:bg-red-900/30 dark:text-red-400 border border-red-100 dark:border-red-800"})[r]||"text-gray-600 bg-gray-50 border border-gray-100",x=r=>new Date(r).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"});return e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 min-h-screen",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 lg:p-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight",children:"Your Orders"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage and track your recent purchases"})]}),e.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition shadow-sm",children:[e.jsx(D,{className:"text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:o==="desc"?"Newest First":"Oldest First"})]})]}),h?e.jsx("div",{className:"flex flex-col items-center justify-center py-32",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-600"})}):g.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 bg-gray-50/50 dark:bg-gray-900/20 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-50 dark:bg-gray-900 rounded-full flex items-center justify-center mb-6",children:e.jsx(b,{className:"text-3xl text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No orders found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Looks like you haven't placed any orders yet."}),e.jsx("button",{onClick:()=>n("/shop"),className:"px-6 py-2.5 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 transition shadow-lg shadow-blue-600/20",children:"Start Shopping"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-6 max-h-[600px] overflow-y-auto custom-scrollbar pr-2",children:g.map(r=>e.jsx("div",{onClick:()=>n(`/order-details/${r._id}`),className:"group bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md hover:border-blue-300 dark:hover:border-blue-700 transition-all cursor-pointer",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"flex items-center -space-x-4 overflow-hidden py-2 pl-2",children:[r.productImages.slice(0,3).map((d,c)=>e.jsx("div",{className:"relative w-20 h-20 rounded-xl border-4 border-white dark:border-gray-900 shadow-sm overflow-hidden bg-white dark:bg-gray-800 transition-transform group-hover:scale-105",style:{zIndex:10-c},children:e.jsx("img",{src:d,alt:"Product",className:"w-full h-full object-cover"})},c)),r.itemCount>3&&e.jsx("div",{className:"relative w-20 h-20 rounded-xl border-4 border-white dark:border-gray-900 shadow-sm bg-gray-50 dark:bg-gray-800 flex items-center justify-center z-0",children:e.jsxs("span",{className:"text-sm font-bold text-gray-500 dark:text-gray-400",children:["+",r.itemCount-3]})})]})}),e.jsxs("div",{className:"flex-1 min-w-0 py-1",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:["Order #",r.orderId]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 flex items-center gap-2",children:[e.jsx(m,{className:"text-xs"}),x(r.orderDate)]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider ${w(r.orderStatus)}`,children:r.orderStatus})]}),e.jsxs("div",{className:"flex flex-wrap gap-y-2 gap-x-6 text-sm text-gray-600 dark:text-gray-400 pt-3 border-t border-gray-50 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"bg-gray-100 dark:bg-gray-800 p-1.5 rounded-lg text-gray-500",children:e.jsx(b,{className:"text-xs"})}),e.jsxs("span",{className:"font-medium",children:[r.itemCount," ",r.itemCount===1?"Item":"Items"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"bg-gray-100 dark:bg-gray-800 p-1.5 rounded-lg text-gray-500",children:e.jsx(F,{className:"text-xs"})}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["Total: â‚¹",r.totalAmount.toFixed(2)]})]}),r.expectedDeliveryDate&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx("span",{className:"bg-green-50 dark:bg-green-900/20 p-1.5 rounded-lg",children:e.jsx(m,{className:"text-xs"})}),e.jsxs("span",{className:"font-medium",children:["Delivery: ",x(r.expectedDeliveryDate)]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-end lg:justify-center gap-3 pl-4 border-l border-gray-100 dark:border-gray-800 lg:border-l-0",children:[e.jsx("div",{onClick:d=>d.stopPropagation(),children:e.jsx(E,{order:r,className:"w-10 h-10 p-2.5 flex items-center justify-center bg-gray-50 dark:bg-gray-800 text-gray-400 hover:text-red-600 dark:text-gray-500 dark:hover:text-red-400 rounded-full hover:bg-red-50 dark:hover:bg-red-900/10 transition-all cursor-pointer"})}),e.jsx("button",{className:"p-3 rounded-full bg-gray-50 dark:bg-gray-800 group-hover:bg-blue-600 group-hover:text-white transition-all text-gray-400",children:e.jsx(O,{})})]})]})},r._id))}),s>1&&e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-10",children:[e.jsx("button",{onClick:j,disabled:a===1,className:`px-5 py-2.5 rounded-xl font-medium transition-all ${a===1?"bg-gray-100 dark:bg-gray-800 text-gray-400 cursor-not-allowed":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 border border-gray-200 dark:border-gray-700 hover:shadow-sm"}`,children:"Previous"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 px-4 py-2 rounded-xl border border-gray-100 dark:border-gray-700",children:["Page ",a," of ",s]}),e.jsx("button",{onClick:v,disabled:a===s,className:`px-5 py-2.5 rounded-xl font-medium transition-all ${a===s?"bg-gray-100 dark:bg-gray-800 text-gray-400 cursor-not-allowed":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 border border-gray-200 dark:border-gray-700 hover:shadow-sm"}`,children:"Next"})]})]})]})})};export{R as default};
