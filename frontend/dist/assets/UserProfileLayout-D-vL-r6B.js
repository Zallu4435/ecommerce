import{n as M,o as O,r as h,j as e,B as w,p as R,L as z,q as D,s as T,t as B,u as $,w as W,x as G,y as H,z as _,A as q,C as Q,D as V,E as Y,N as K,G as J,H as L,I as E,M as P,X,J as Z,K as ee,O as ae,P as se,Q as te,R as re,S,T as I,U as le,V as de,W as ne,Y as oe,Z as C}from"./index-DNwfBDY0.js";import{u as F}from"./usePreventBodyScroll-D2l0Zfsl.js";import{a as ie}from"./addressSchema-Bj52--1g.js";import{P as A}from"./plus-C5cYjQOd.js";import{S as ce,C as xe}from"./star-3kdod5cX.js";import{P as me}from"./pencil-Dn6gjtjM.js";import{T as ue}from"./trash-2-D6jt9bEq.js";import ge from"./NotFound-BYebEUtO.js";import he from"./OrdersListGrouped-BVirNj52.js";import"./index-BBTKOM0z.js";import"./DownloadUtils-Sp_aF8bs.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=M("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=M("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=M("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),fe="/assets/wallet-hiGocbne.jpg";function we({isOpen:l,onClose:x,userInfo:s={}}){const[i]=O(),[t,m]=h.useState({username:"",nickname:"",email:"",phone:"",gender:"",...s}),c=s.email;if(F(l),!l)return null;const u=a=>{const{name:o,value:f}=a.target;m(N=>({...N,[o]:f}))},g=async a=>{var o;a.preventDefault();try{await i({updateData:t,oldEmail:c}).unwrap(),x()}catch(f){w.error((o=f==null?void 0:f.data)==null?void 0:o.message),console.error("Failed to update user info",f)}},d=a=>a.toLowerCase().includes("email")?"email":a.toLowerCase().includes("password")?"password":a.toLowerCase().includes("phone")?"tel":a.toLowerCase().includes("date")?"date":"text",n=["username","nickname","phone","gender"];return e.jsx("div",{className:"fixed inset-0 z-50 bg-black backdrop-blur-sm bg-opacity-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 w-full max-w-3xl",children:[e.jsx("h2",{className:"text-3xl font-semibold mb-6 text-gray-800 dark:text-gray-100",children:"Edit Profile"}),e.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Object.entries(t).filter(([a])=>n.includes(a.toLowerCase())).map(([a,o])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:a,className:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:a.charAt(0).toUpperCase()+a.slice(1)}),e.jsx("input",{type:d(a),id:a,name:a,value:o,onChange:u,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 dark:bg-gray-700 dark:text-white dark:focus:ring-pink-500"})]},a)),e.jsxs("div",{className:"col-span-full",children:[e.jsx("label",{htmlFor:"email",className:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:u,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 dark:bg-gray-700 dark:text-white dark:focus:ring-pink-500"})]}),e.jsxs("div",{className:"col-span-full flex justify-end space-x-6 mt-6",children:[e.jsx("button",{type:"button",onClick:x,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-3 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-pink-500 hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500",children:"Save Changes"})]})]})]})})}const je=({avatar:l,username:x,id:s,onAvatarUpdate:i})=>{const[t,m]=h.useState({avatar:l,username:x}),[c,u]=h.useState(!1),[g]=R();h.useEffect(()=>{m({avatar:l,username:x})},[l,x]);const d=async n=>{const a=n.target.files[0];if(a)try{u(!0);const o=new FormData;o.append("avatar",a),o.append("id",s);const{data:f}=await g(o).unwrap();m({...t,avatar:f.avatarUrl}),i(),u(!1)}catch(o){console.error("Error uploading avatar:",o),u(!1)}};return e.jsxs(e.Fragment,{children:[c&&e.jsx(z,{}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative mb-6 flex justify-center",children:[e.jsx("img",{src:t.avatar.replace("s96-c","s200-c"),alt:"User Avatar",className:"w-24 h-24 rounded-full border-4 border-gray-200"}),e.jsx("input",{type:"file",accept:"image/*",onChange:d,style:{display:"none"},id:"avatarInput"}),e.jsx("label",{htmlFor:"avatarInput",className:"absolute top-12 right-[calc(10%-12px)] bg-yellow-500 text-white p-2 rounded-full shadow-md hover:bg-yellow-600 transition duration-300 cursor-pointer",children:e.jsx(D,{size:16})})]}),e.jsx("div",{className:"text-center mt-1",children:e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100",children:t.username})})]})]})};function ve(){var N,p,k,v,y,r,j;const[l,x]=h.useState(!1),{data:s,isLoading:i,isError:t,error:m,refetch:c}=T(),[u,g]=h.useState(""),[d,n]=h.useState(""),[a,o]=h.useState(!1);if(h.useEffect(()=>{s!=null&&s.user&&(g(s.user.avatar),n(s.user.username))},[s]),i)return e.jsx(z,{});if(t)return e.jsxs("div",{children:["Error: ",(m==null?void 0:m.message)||"Failed to fetch data"]});const f=[{label:"Username",value:((N=s.user)==null?void 0:N.username)||"N/A"},{label:"Nickname",value:((p=s.user)==null?void 0:p.nickname)||"N/A"},{label:"Email",value:((k=s.user)==null?void 0:k.email)||"N/A"},{label:"Phone Number",value:((v=s.user)==null?void 0:v.phone)||"N/A"},{label:"Gender",value:((y=s.user)==null?void 0:y.gender)||"N/A"},...(r=s.user)!=null&&r.referredBy?[{label:"Referred By",value:s.user.referredBy}]:[]];return e.jsxs("div",{className:"flex-1 lg:mt-0 mt-14 dark:bg-gray-800 shadow-md rounded-lg p-6 lg:ml-6",children:[e.jsx(je,{avatar:u||B,username:d,onAvatarUpdate:c,id:s==null?void 0:s.user._id}),e.jsx("div",{className:"space-y-4",children:f.map((b,U)=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:b.label}),e.jsx("span",{children:b.value})]},U))}),e.jsxs("div",{className:"mt-8 border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Refer & Earn"}),e.jsxs("div",{className:"bg-blue-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:["Share your referral code with friends! They get ",e.jsx("span",{className:"font-bold text-green-600",children:"₹50"})," instantly on signup, and you earn ",e.jsx("span",{className:"font-bold text-green-600",children:"₹100"})," when they place their first order!"]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-dashed border-gray-400 dark:border-gray-600 px-4 py-2 rounded font-mono font-bold text-xl tracking-wider text-blue-600 dark:text-blue-400",children:((j=s.user)==null?void 0:j.referralCode)||"Loading..."}),e.jsx("button",{onClick:()=>{var b;navigator.clipboard.writeText((b=s.user)==null?void 0:b.referralCode),o(!0),setTimeout(()=>o(!1),2e3)},className:`text-sm px-3 py-2 rounded transition ${a?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"} text-white`,children:a?"Copied!":"Copy Code"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>x(!l),className:"w-full bg-yellow-500 text-white py-2 rounded-md hover:bg-yellow-600 transition duration-300",children:"Edit Profile"})}),e.jsx(we,{isOpen:l,onClose:()=>x(!1),userInfo:s.user})]})}const ke=()=>{const[l,x]=h.useState(!1),s=$(),[i]=W(),[t,m]=h.useState(!1);h.useEffect(()=>{const n=()=>{m(window.scrollY>100)};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]);const c=async()=>{try{await i().unwrap(),window.google&&window.google.accounts.id.disableAutoSelect(),s("/login")}catch(n){console.error("Logout failed:",n)}},u=[{to:"/profile",icon:_,label:"Profile Overview"},{to:"/profile/order",icon:q,label:"My Orders"},{to:"/profile/password",icon:Q,label:"Change Password"},{to:"/profile/address",icon:V,label:"Add Address"},{to:"/profile/wallet",icon:Y,label:"Wallet"}],g=()=>{x(!l)},d=()=>{x(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:g,className:`md:hidden transition-all duration-300 ease-in-out fixed top-[80px] right-[44%] z-50 p-4 dark:text-gray-700 text-gray-200
          ${t?"fixed top-[-5px]":""}`,children:e.jsx(G,{size:24})}),l&&e.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:d}),e.jsxs("div",{className:`fixed md:relative top-0 left-0 h-auto w-full md:w-[350px] md:h-[500px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-lg overflow-y-auto transition-transform duration-300 ease-in-out z-50 md:z-0 ${l?"translate-y-0":"-translate-y-full"} md:translate-y-0 md:translate-x-0`,children:[e.jsx("button",{onClick:d,className:"md:hidden absolute top-0 left-0 p-4 text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100",children:e.jsx(H,{size:24})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-2xl font-semibold mb-8 flex items-center gap-2 pt-8 md:pt-0",children:[e.jsx("span",{className:"text-blue-500 dark:text-yellow-400",children:"User"})," ","Dashboard"]}),e.jsx("div",{className:"space-y-6 flex-grow",children:u.map(n=>e.jsxs(K,{to:n.to,end:!0,onClick:d,className:({isActive:a})=>`flex items-center text-lg gap-4 px-4 py-2 rounded-md transition duration-300 ${a?"bg-blue-100 dark:bg-yellow-500 text-blue-700 dark:text-black":"hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-blue-500 dark:hover:text-yellow-400"}`,children:[e.jsx(n.icon,{className:"text-xl"}),n.label]},n.to))}),e.jsx("div",{className:"mt-8",children:e.jsxs("button",{onClick:c,className:"w-full bg-red-500 dark:bg-red-600 text-white py-2 rounded-md flex items-center justify-center gap-2 hover:bg-red-600 dark:hover:bg-red-700 transition duration-300",children:[e.jsx(J,{}),"Log Out"]})})]})]})]})},Ne=({isOpen:l,onClose:x,onSave:s,formData:i})=>{const{register:t,handleSubmit:m,formState:{errors:c},reset:u}=L({resolver:E(ie),defaultValues:i||{fullName:"",phone:"",zipCode:"",house:"",street:"",landmark:"",city:"",state:""},mode:"onBlur"});if(F(l),h.useEffect(()=>{i&&u({...i,zipCode:i.zipCode?String(i.zipCode):""})},[i,u]),!l)return null;const g=[{name:"fullName",label:"Full Name",placeholder:"Enter recipient's name"},{name:"phone",label:"Phone Number",placeholder:"e.g. +91 9876543210"},{name:"zipCode",label:"Postal Code",placeholder:"e.g. 110001"},{name:"house",label:"Flat / House No.",placeholder:"e.g. House No. 42"},{name:"street",label:"Area / Street",placeholder:"e.g. MG Road, Civil Lines"},{name:"landmark",label:"Landmark (Optional)",placeholder:"e.g. Near Mall"},{name:"city",label:"City",placeholder:"Enter city"},{name:"state",label:"State",placeholder:"Enter state"}];return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6 overflow-hidden animate-fadeIn",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-md transition-opacity duration-300",onClick:x}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 w-full max-w-2xl rounded-[2.5rem] shadow-2xl flex flex-col max-h-[90vh] overflow-hidden border border-gray-200 dark:border-gray-800 animate-slideUp",children:[e.jsxs("div",{className:"p-6 sm:p-8 flex items-center justify-between border-b border-gray-100 dark:border-gray-800/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 rounded-2xl",children:e.jsx(P,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.editing?"Edit Delivery Address":"Add New Address"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Please provide accurate details for smooth delivery"})]})]}),e.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors group",children:e.jsx(X,{className:"w-6 h-6 text-gray-400 group-hover:text-red-500 transition-colors"})})]}),e.jsxs("form",{onSubmit:m(d=>{s(d),x()}),className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-6 sm:p-8 custom-scrollbar bg-white dark:bg-transparent",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-5",children:g.map(({name:d,label:n,placeholder:a})=>{var o;return e.jsxs("div",{className:d==="street"||d==="house"?"sm:col-span-2":"",children:[e.jsx("label",{htmlFor:d,className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5 ml-1",children:n}),e.jsx("div",{className:"relative group",children:e.jsx("input",{id:d,type:"text",placeholder:a,...t(d),className:`w-full px-5 py-4 bg-gray-50 dark:bg-gray-800/50 border-2 rounded-2xl text-gray-900 dark:text-white transition-all duration-300 focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-600 ${c[d]?"border-red-500/50 focus:border-red-500 ring-red-50 dark:ring-red-900/20":"border-transparent hover:border-gray-200 dark:hover:border-gray-700 focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-50 dark:focus:ring-blue-900/20 shadow-sm"}`})}),c[d]&&e.jsx("p",{className:"text-red-500 text-xs font-medium mt-1.5 ml-2 animate-shake",children:(o=c[d])==null?void 0:o.message})]},d)})})}),e.jsxs("div",{className:"p-6 sm:p-8 bg-gray-50 dark:bg-gray-800/20 border-t border-gray-100 dark:border-gray-800/50 flex flex-col sm:flex-row gap-4 items-center justify-end",children:[e.jsx("button",{type:"button",onClick:x,className:"w-full sm:w-auto px-8 py-3.5 text-gray-500 dark:text-gray-400 font-semibold hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"w-full sm:w-auto px-10 py-3.5 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-2xl shadow-lg shadow-blue-600/20 dark:shadow-none transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2",children:i.editing?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-5 h-5"}),"Update Address"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-5 h-5"}),"Save Address"]})})]})]})]})]})},Ce=()=>{const{data:l,isLoading:x,isError:s}=Z(),[i]=ee(),[t]=ae(),[m]=se(),[c]=te(),[u,g]=h.useState(!1),[d,n]=h.useState(null),[a,o]=h.useState({fullName:"",phone:"",zipCode:"",house:"",street:"",landmark:"",city:"",state:"",isPrimary:!1,editing:!1}),f=async r=>{var j;if(l.length>=7){w.warning("You can only add up to 7 addresses.");return}try{await i(r).unwrap(),w.success("Address added successfully"),g(!1)}catch(b){w.error(((j=b==null?void 0:b.data)==null?void 0:j.message)||"Failed to add address")}},N=r=>{n(r._id),o({...r,zipCode:r.zipCode?String(r.zipCode):"",editing:!0}),g(!0)},p=async r=>{var j;try{await t({id:d,updatedAddress:r}).unwrap(),g(!1),n(null),w.success("Address updated successfully")}catch(b){w.error(((j=b==null?void 0:b.data)==null?void 0:j.message)||"Failed to edit")}},k=async r=>{var j;try{await m(r).unwrap(),w.success("Address removed successfully")}catch(b){w.error(((j=b==null?void 0:b.data)==null?void 0:j.message)||"Failed to remove address")}},v=async r=>{var j;try{await c(r).unwrap(),w.success("Primary address updated successfully")}catch(b){w.error(((j=b==null?void 0:b.data)==null?void 0:j.message)||"Failed to set primary address")}},y=()=>{n(null),o({fullName:"",phone:"",zipCode:"",house:"",street:"",landmark:"",city:"",state:"",isPrimary:!1,editing:!1}),g(!0)};return x?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center",children:e.jsx(z,{})}):s?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex flex-col items-center justify-center p-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-12 rounded-[2.5rem] border border-gray-200 dark:border-gray-800 text-center shadow-xl",children:[e.jsx(P,{className:"w-16 h-16 text-red-500 mb-6 mx-auto opacity-50"}),e.jsx("h3",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2",children:"Ops! Something went wrong"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8",children:"Could not load your addresses at this time."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-500 text-white px-8 py-3 rounded-2xl font-bold transition-all",children:"Try Refreshing"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 p-4 sm:p-8 lg:p-12 font-sans selection:bg-blue-500/30 transition-colors duration-300",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight",children:"Delivery Locations"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-base",children:"Manage your delivery locations for faster checkout"})]}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-6 py-3.5 rounded-2xl font-bold transition-all duration-300 shadow-xl shadow-blue-600/20 group",children:[e.jsx(A,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"}),"New Address"]})]}),l&&l.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10",children:l.map(r=>e.jsxs("div",{className:`relative bg-white dark:bg-gray-900 rounded-[2rem] p-8 border-2 transition-all duration-500 flex flex-col h-full ${r.isPrimary?"border-blue-500 shadow-2xl shadow-blue-500/10":"border-gray-100 dark:border-gray-800 hover:border-blue-200 dark:hover:border-gray-700"}`,children:[r.isPrimary&&e.jsxs("div",{className:"absolute -top-[18px] left-10 px-4 py-1.5 bg-blue-600 dark:bg-blue-600 text-white text-[10px] font-black rounded-xl shadow-lg flex items-center gap-2 uppercase tracking-[0.15em] border border-white/20",children:[e.jsx(ce,{className:"w-3.5 h-3.5 fill-current"}),"Primary"]}),e.jsxs("div",{className:"flex items-start gap-5 mb-8",children:[e.jsx("div",{className:`p-4 rounded-2xl shrink-0 ${r.isPrimary?"bg-blue-600 dark:bg-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400"}`,children:e.jsx(be,{className:"w-6 h-6"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white truncate",children:r.fullName}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx(re,{className:"w-3.5 h-3.5 opacity-60"}),r.phone]})]})]}),e.jsx("div",{className:"space-y-6 flex-grow",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-[1.5px] bg-gray-100 dark:bg-gray-800"}),e.jsxs("div",{className:"space-y-4 py-1",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pe,{className:"w-5 h-5 text-blue-500 dark:text-blue-400 shrink-0"}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:[r.house,", ",r.street]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(P,{className:"w-5 h-5 text-blue-500 dark:text-blue-400 shrink-0"}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:[r.city,", ",r.state," - ",e.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-medium",children:r.zipCode})]})]}),r.landmark&&e.jsxs("div",{className:"pl-8 text-xs text-gray-400 dark:text-gray-500 italic mt-[-10px]",children:["Near ",r.landmark]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-10 min-w-0",children:[e.jsxs("button",{onClick:()=>N(r),className:"flex-grow flex items-center justify-center gap-2 px-4 py-4 bg-gray-900 dark:bg-gray-800 hover:bg-gray-800 dark:hover:bg-gray-700 text-white rounded-2xl transition-all duration-300 font-bold text-sm group whitespace-nowrap min-w-0",children:[e.jsx(me,{className:"w-5 h-5 opacity-80 group-hover:scale-110 transition-transform shrink-0"}),e.jsx("span",{className:"truncate",children:"Edit Address"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsx("button",{onClick:()=>k(r._id),disabled:r.isPrimary,className:`p-3.5 rounded-2xl transition-all duration-300 ${r.isPrimary?"opacity-20 cursor-not-allowed text-gray-300 dark:text-gray-600":"bg-transparent text-gray-400 dark:text-gray-500 hover:bg-red-500/10 hover:text-red-500"}`,title:r.isPrimary?"Primary address cannot be deleted":"Remove address",children:e.jsx(ue,{className:"w-5 h-5"})}),!r.isPrimary&&e.jsx("button",{onClick:()=>v(r._id),className:"p-3.5 rounded-2xl text-gray-400 dark:text-gray-500 hover:bg-emerald-500/10 hover:text-emerald-500 transition-all duration-300",title:"Set as Default",children:e.jsx(xe,{className:"w-5 h-5"})})]})]})]},r._id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 bg-white dark:bg-gray-900 rounded-[3rem] border border-gray-100 dark:border-gray-800/50 shadow-sm",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-10 rounded-[2.5rem] mb-10",children:e.jsx(P,{className:"w-16 h-16 text-blue-500 opacity-50"})}),e.jsx("h3",{className:"text-3xl font-black text-gray-900 dark:text-white mb-3 text-center",children:"No Saved Addresses"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center max-w-sm mb-12 text-lg px-6",children:"You haven't saved any addresses yet. Add one to start shopping!"}),e.jsxs("button",{onClick:y,className:"flex items-center gap-3 bg-blue-600 hover:bg-blue-700 text-white px-10 py-5 rounded-[1.5rem] font-bold transition-all shadow-2xl shadow-blue-600/30",children:[e.jsx(A,{className:"w-6 h-6"}),"Add First Address"]})]}),e.jsx(Ne,{isOpen:u,onClose:()=>g(!1),onSave:d?p:f,formData:a})]})})},Pe=/^[ -~]+$/,Se=S.string().min(8,{message:"Password must be at least 8 characters"}).max(64,{message:"Password must not exceed 64 characters"}).regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\w\s])[ -~]+$/,{message:"Password must include upper, lower, number and symbol, and contain no spaces or emojis"}).regex(Pe,{message:"Password cannot contain emojis or non-ASCII"}),Ae=S.object({currentPassword:S.string().min(1,{message:"Current password is required"}),newPassword:Se,confirmPassword:S.string().min(1,{message:"Please confirm your new password"})}).refine(l=>l.newPassword===l.confirmPassword,{path:["confirmPassword"],message:"New password and confirm password must match"});function Me(l){return I({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 0 0 0-51.5zm-63.57-320.64L836 122.88a8 8 0 0 0-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 0 0 0 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 0 0 0 11.31L155.17 889a8 8 0 0 0 11.31 0l712.15-712.12a8 8 0 0 0 0-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 0 0-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 0 1 146.2-106.69L401.31 546.2A112 112 0 0 1 396 512z"},child:[]},{tag:"path",attr:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 0 0 227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 0 1-112 112z"},child:[]}]})(l)}function ze(l){return I({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 0 0 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"},child:[]}]})(l)}const Fe=Ae,Le=()=>{const[l,x]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[s,i]=h.useState({type:"",text:""}),[t,m]=h.useState({currentPassword:!1,newPassword:!1,confirmPassword:!1}),{register:c,handleSubmit:u,formState:{errors:g},setValue:d}=L({resolver:E(Fe)}),[n,{isLoading:a,error:o}]=le(),f=async p=>{var k;i({type:"",text:""});try{await n(p).unwrap(),w.success("Password changed successfully!"),i({type:"success",text:"Password changed successfully!"}),d("currentPassword",""),d("newPassword",""),d("confirmPassword","")}catch(v){const y=((k=v==null?void 0:v.data)==null?void 0:k.message)||"Failed to change password";i({type:"error",text:y})}},N=[{id:"currentPassword",label:"Current Password",type:"password",placeholder:"Enter your current password"},{id:"newPassword",label:"New Password",type:"password",placeholder:"Enter your new password"},{id:"confirmPassword",label:"Confirm New Password",type:"password",placeholder:"Confirm your new password"}];return e.jsxs("div",{className:"mx-auto mt-4 lg:mt-0 bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-[700px] p-4 sm:p-6 md:p-8 lg:p-10",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-center mb-6 text-gray-600 dark:text-gray-200",children:"Change Password"}),s.text&&e.jsx("p",{className:`text-sm font-bold mb-4 ${s.type==="error"?"text-red-500":"text-green-500"}`,children:s.text}),e.jsxs("form",{onSubmit:u(f),className:"space-y-4",children:[N.map(({id:p,label:k,type:v,placeholder:y})=>{var r;return e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:p,className:"block text-gray-700 dark:text-gray-300 text-base sm:text-lg font-bold mb-2",children:k}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:t[p]?"text":"password",id:p,name:p,placeholder:y,...c(p),className:`w-full px-3 sm:px-4 py-3 sm:py-4 border-2 sm:border-4 border-gray-300 dark:text-white dark:bg-gray-800 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-500 ${g[p]?"border-red-500":""}`}),e.jsx("button",{type:"button",className:"absolute right-3 sm:right-4 top-1/2 transform -translate-y-1/2",onClick:()=>m({...t,[p]:!t[p]}),children:t[p]?e.jsx(Me,{className:"text-xl sm:text-2xl"}):e.jsx(ze,{className:"text-xl sm:text-2xl"})})]}),g[p]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:(r=g[p])==null?void 0:r.message})]},p)}),e.jsx("button",{type:"submit",className:"w-full font-bold text-base sm:text-lg bg-indigo-500 text-white py-3 sm:py-4 rounded-md hover:bg-indigo-600 transition duration-300 mt-6 disabled:opacity-50 disabled:cursor-not-allowed",disabled:a,children:a?"Changing...":"Change Password"})]})]})},Ee=({transactions:l,closeModal:x,isOpen:s})=>{if(F(s),!s)return null;const i=t=>{const m=u=>{const g=/[a-f\d]{24}/i,d=u.match(g);if(d){const n=d[0],a=`ORD-${n.slice(-6).toUpperCase()}`;return u.replace(n,a)}return u},c=m(t);return t.includes("Refund for order cancel")||t.includes("Refund for returned item")?m(t):t.toLowerCase().includes("payment for order")?c:t.includes("Wallet recharge")?"Funds added to the wallet.":c};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-[90%] max-w-xl p-6 px-10 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4 dark:text-gray-200 text-center",children:"Transaction History"}),(l==null?void 0:l.length)===0?e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center",children:"No transactions yet."}):e.jsx("ul",{className:"max-h-[470px] overflow-y-auto scrollbar-hidden",children:l.map((t,m)=>e.jsxs("li",{className:"flex flex-col py-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:`font-bold text-lg ${t.type==="Credit"?"text-green-500":"text-red-500"}`,children:t.type}),e.jsxs("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:["₹ ",t.amount.toFixed(2)]})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:[e.jsx("strong",{children:"Date:"})," ",new Date(t.createdAt).toLocaleDateString("en-GB",{weekday:"short",year:"numeric",month:"long",day:"numeric"})," ","at"," ",new Date(t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[e.jsx("strong",{children:"Status:"})," ",t.status]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[e.jsx("strong",{children:"Details:"})," ",i(t.description)]})]},t._id||m))}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("button",{onClick:x,className:"bg-red-500 text-white px-12 py-2 font-bold rounded-md hover:bg-red-600 transition duration-300",children:"Close"})})]})})},Ie=()=>{const[l,x]=h.useState(0),[s,i]=h.useState(""),[t,m]=h.useState(!1),{data:c,refetch:u}=de(),[g]=ne();h.useEffect(()=>{if(c){const a=c.wallet?c.wallet.balance:0;x(a)}},[c]);const d=()=>new Promise(a=>{const o=document.createElement("script");o.src="https://checkout.razorpay.com/v1/checkout.js",o.onload=()=>a(!0),o.onerror=()=>a(!1),document.body.appendChild(o)}),n=async()=>{const a=parseFloat(s);if(isNaN(a)||a<=0){w.info("Please enter a valid amount.");return}if(!await d()){w.error("Failed to load Razorpay SDK. Please try again later.");return}const f={key:"rzp_test_S0cXdT2gxTqG7n",amount:a*100,currency:"INR",name:"Test Wallet",description:"Wallet Recharge",handler:async function(p){var v;const k={paymentId:p.razorpay_payment_id,amount:a,type:"Credit"};try{const y=await g(k).unwrap();y.success&&(x(y.wallet.balance),u(),w.success("Payment successful! Wallet updated."),i(""))}catch(y){console.error(y,"message"),w.error(((v=y==null?void 0:y.data)==null?void 0:v.message)||"Failed to update wallet. Please try again.")}},prefill:{name:"John Doe",email:"john.doe@example.com",contact:"9876543210"},theme:{color:"#3399cc"}};new window.Razorpay(f).open()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 shadow-lg rounded-lg mx-auto w-full max-w-2xl p-10 space-y-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-gray-300 text-center mb-6",children:"My Wallet"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:fe,alt:"Wallet Card",className:"rounded-lg shadow-lg dark:bg-gray-900 md:w-[400px] md:h-[200px] md:w-[500px] md:h-[250px]"})}),e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("p",{className:"text-center text-gray-600 dark:text-gray-200 text-lg",children:"Current Balance:"}),e.jsxs("h2",{className:"text-lg font-semibold text-green-600 text-center",children:["₹",l.toFixed(2)]})]}),e.jsx("div",{children:e.jsx("input",{type:"number",value:s,onChange:a=>i(a.target.value),placeholder:"Enter amount",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none dark:text-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 text-lg"})}),e.jsxs("div",{className:"flex justify-between items-center space-x-4",children:[e.jsxs("button",{onClick:n,className:`bg-blue-500 text-white px-5 py-2 rounded-lg hover:bg-blue-600 transition duration-300 
             w-full sm:w-3/4 md:w-1/2 text-center`,children:[e.jsx("span",{className:"block sm:hidden",children:"Add ₹"}),e.jsx("span",{className:"hidden sm:block",children:"Add Money (Razorpay)"})]}),e.jsxs("button",{onClick:()=>m(!0),className:`bg-red-400 text-white px-5 py-2 rounded-lg hover:bg-red-500 transition duration-300 
             w-full sm:w-3/4 md:w-1/2 text-center`,children:[e.jsx("span",{className:"block sm:hidden",children:"History"}),e.jsx("span",{className:"hidden sm:block",children:"Show Transaction History"})]})]})]}),t&&e.jsx(Ee,{isOpen:t,transactions:(c==null?void 0:c.transactions)||[],closeModal:()=>m(!1)})]})},qe=()=>e.jsxs("div",{className:"flex justify-start lg:space-x-6 lg:m-16 lg:mx-32",children:[e.jsx(ke,{className:"w-1/4"}),e.jsx("div",{className:"flex-1 p-2",children:e.jsxs(oe,{children:[e.jsx(C,{index:!0,element:e.jsx(ve,{})}),e.jsx(C,{path:"address",element:e.jsx(Ce,{})}),e.jsx(C,{path:"password",element:e.jsx(Le,{})}),e.jsx(C,{path:"order",element:e.jsx(he,{})}),e.jsx(C,{path:"wallet",element:e.jsx(Ie,{})}),e.jsx(C,{path:"*",element:e.jsx(ge,{notFound:1})})]})})]});export{qe as default};
