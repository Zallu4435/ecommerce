import{n as S,as as P,r as o,H as B,I as G,j as e,L as E,at as z,y as F,ag as O,af as D,a2 as V,au as Q,X as H,av as T,al as Y,B as k,u as q,aw as Z}from"./index-DNwfBDY0.js";import{a as R}from"./addressSchema-Bj52--1g.js";import{S as W,C as A}from"./star-3kdod5cX.js";import{C as I,B as L}from"./credit-card-TwjS0omd.js";import{u as X}from"./CouponApiSlice-9zeQ3mce.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=S("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=S("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=S("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),$="/assets/card-CaW-Z5eC.jpg",_="data:image/png;base64,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",ee=({onAddressSelect:d})=>{const{data:t=[],isLoading:p,isError:r}=P(),[x,i]=o.useState(null),[u,n]=o.useState(!1),[c,a]=o.useState(!1),[s,b]=o.useState(null),{control:j,reset:f,handleSubmit:h,formState:{errors:m}}=B({defaultValues:{fullName:"",phone:"",zipCode:"",house:"",street:"",landmark:"",city:"",state:""},resolver:G(R),mode:"onBlur"});o.useEffect(()=>{if(t.length>0){const l=t.findIndex(C=>C.isPrimary),y=l!==-1?l:0,v=t[y];i(y),b(v),f({...v,zipCode:v.zipCode?String(v.zipCode):""})}},[t,f]),o.useEffect(()=>{s&&d(s)},[s,d]);const N=l=>{b(l),n(!1)},w=()=>{f({fullName:"",phone:"",zipCode:"",house:"",street:"",landmark:"",city:"",state:""}),n(!0)},g=l=>{i(l),b(t[l]),n(!1),a(!1)};return o.useEffect(()=>(c?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[c]),p?e.jsx(E,{}):r?e.jsx("div",{className:"text-center text-red-500 py-10 bg-white dark:bg-gray-900 rounded-2xl border border-gray-100 dark:border-gray-800",children:"Error loading addresses."}):e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 sm:p-8 shadow-xl shadow-gray-200/50 dark:shadow-none rounded-[2rem] border border-gray-100 dark:border-gray-800 transition-all duration-300",children:[e.jsx("h2",{className:"text-2xl font-black mb-8 text-gray-900 dark:text-white tracking-tight",children:"Shipping Address"}),u?e.jsxs("form",{onSubmit:h(N),className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{name:"fullName",placeholder:"Enter full name",label:"Full Name"},{name:"phone",placeholder:"Enter phone number",label:"Phone"},{name:"zipCode",placeholder:"Enter zip code",label:"Zip Code"},{name:"house",placeholder:"Enter house/apartment",label:"House No."},{name:"street",placeholder:"Enter street",label:"Street"},{name:"landmark",placeholder:"Enter landmark (optional)",label:"Landmark"},{name:"city",placeholder:"Enter city",label:"City"},{name:"state",placeholder:"Enter state",label:"State"}].map(({name:l,placeholder:y,label:v})=>{var C;return e.jsxs("div",{className:l==="street"||l==="house"?"md:col-span-2":"",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2 ml-1",children:v}),e.jsx(z,{name:l,control:j,render:({field:M})=>e.jsx("input",{...M,placeholder:y,className:"w-full px-5 py-4 bg-gray-50 dark:bg-gray-800/50 text-gray-900 dark:text-white border-2 border-transparent rounded-2xl focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-50 dark:focus:ring-blue-900/20 transition-all duration-300 placeholder:text-gray-400 dark:placeholder:text-gray-600"})}),m[l]&&e.jsx("p",{className:"text-red-500 text-xs font-medium mt-1.5 ml-2",children:(C=m[l])==null?void 0:C.message})]},l)})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 mt-8",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-8 py-3.5 text-gray-500 dark:text-gray-400 font-bold hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-10 py-3.5 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-2xl shadow-lg shadow-blue-600/20 transition-all duration-300 transform hover:scale-[1.02]",children:"Save Address"})]})]}):e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-sm font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest",children:"Selected Location"})}),e.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/40 rounded-[1.5rem] border border-gray-100 dark:border-gray-800 relative group overflow-hidden",children:s?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-y-4 gap-x-8",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase",children:"Recipient"}),e.jsx("p",{className:"text-base font-bold text-gray-900 dark:text-white",children:s.fullName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.phone})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase",children:"Address"}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed font-medium",children:[s.house,", ",s.street]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.city,", ",s.state," - ",e.jsx("span",{className:"font-bold",children:s.zipCode})]}),s.landmark&&e.jsxs("p",{className:"text-xs italic text-blue-500 dark:text-blue-400 mt-1",children:["Near ",s.landmark]})]})]}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4 italic",children:"Please select or add a shipping address to proceed."})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 mt-8",children:[t.length>1&&e.jsx("button",{type:"button",onClick:()=>a(!0),className:"px-6 py-3.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-bold rounded-2xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-300",children:"Choose Another"}),e.jsx("button",{type:"button",onClick:w,className:"px-8 py-3.5 bg-gray-900 dark:bg-gray-700 text-white font-bold rounded-2xl hover:bg-gray-800 dark:hover:bg-gray-600 transition-all duration-300 shadow-lg",children:"Add New Address"})]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 sm:p-8 rounded-[2.5rem] max-w-lg w-full shadow-2xl relative border border-gray-100 dark:border-gray-800 animate-slideUp max-h-[85vh] flex flex-col",children:[e.jsx("button",{className:"absolute top-6 right-6 p-2 text-gray-400 hover:text-red-500 transition-colors",onClick:()=>a(!1),children:e.jsx(F,{className:"w-5 h-5"})}),e.jsx("h3",{className:"text-2xl font-black mb-6 text-gray-900 dark:text-white pr-10 tracking-tight",children:"Select Address"}),e.jsx("div",{className:"overflow-y-auto pr-2 custom-scrollbar space-y-3 flex-1",children:t.map((l,y)=>e.jsxs("div",{onClick:()=>g(y),className:`cursor-pointer rounded-[1.5rem] p-5 transition-all duration-300 border-2 text-left group ${y===x?"bg-blue-600 border-blue-600 text-white shadow-lg shadow-blue-600/30":"bg-gray-50 dark:bg-gray-800/50 border-transparent hover:border-blue-200 dark:hover:border-blue-900 text-gray-600 dark:text-gray-300 hover:bg-white dark:hover:bg-gray-800"}`,children:[e.jsx("div",{className:`font-bold text-lg mb-2 ${y===x?"text-white":"text-gray-900 dark:text-white"}`,children:l.fullName}),e.jsxs("div",{className:"text-sm space-y-1 opacity-90 font-medium",children:[e.jsxs("p",{children:[l.house,", ",l.street]}),e.jsxs("p",{children:[l.city,", ",l.state," - ",l.zipCode]}),e.jsx("p",{className:"text-xs mt-2 opacity-75",children:l.phone})]})]},y))}),e.jsx("div",{className:"flex justify-end mt-8",children:e.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-8 py-3 text-gray-500 dark:text-gray-400 font-bold hover:text-gray-900 dark:hover:text-white transition-colors",children:"Close"})})]})})]})},ae=({onOrderChange:d,coupon:t})=>{const p=O(),{cartItems:r,productId:x,total:i}=p.state||{},u=o.useRef(null),n=(t==null?void 0:t.potentialDiscount)||0,c=(i||0)-n;return o.useEffect(()=>{const a={cartItems:r,total:c,subtotal:i,productId:x,discount:n,couponCode:t==null?void 0:t.code};d&&r&&JSON.stringify(u.current)!==JSON.stringify(a)&&(u.current=a,d(a))},[d,r,i,x,n,t,c]),!r||r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white dark:bg-gray-900 rounded-[2rem] border border-gray-100 dark:border-gray-800",children:[e.jsx(U,{className:"w-12 h-12 text-gray-200 dark:text-gray-800 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-500",children:"No items in cart"})]}):e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-[2rem] border border-gray-100 dark:border-gray-800 shadow-sm transition-all duration-300 overflow-hidden",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tight",children:"Your Order"}),e.jsxs("p",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest",children:[r.reduce((a,s)=>a+s.quantity,0)," Items Selected"]})]})}),e.jsx("div",{className:"space-y-6",children:r.map(a=>{var s;return e.jsxs("div",{className:"flex gap-5 items-center group animate-fadeIn",children:[e.jsxs("div",{className:"relative w-20 h-20 shrink-0",children:[e.jsx("img",{src:a.productImage,alt:a.productName,className:"w-full h-full object-cover rounded-2xl border border-gray-50 dark:border-gray-800 group-hover:scale-105 transition-transform duration-300"}),e.jsxs("div",{className:"absolute -top-2 -right-2 bg-gray-900 text-white text-[10px] font-black px-2 py-0.5 rounded-full border-2 border-white dark:border-gray-900 shadow-lg",children:["x",a.quantity]})]}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-base truncate mb-1",children:a.productName}),e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:[a.color,a.size,a.gender==="Male"?"Boy":a.gender==="Female"?"Girl":a.gender].filter(Boolean).join(" • ")}),e.jsxs("div",{className:"mt-2 text-sm font-black text-blue-600 dark:text-blue-400",children:["₹ ",(s=Number(a.offerPrice||a.originalPrice))==null?void 0:s.toFixed(2)]})]})]},a.id)})}),e.jsxs("div",{className:"mt-10 pt-8 border-t border-gray-50 dark:border-gray-800 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm font-medium",children:[e.jsx("span",{className:"text-gray-500",children:"Order Subtotal"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-bold",children:["₹ ",Number(i||0).toFixed(2)]})]}),n>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm font-medium text-emerald-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 fill-current"}),e.jsx("span",{children:"Coupon Savings"})]}),e.jsxs("span",{className:"font-bold",children:["- ₹ ",Number(n||0).toFixed(2)]})]}),e.jsx("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-800",children:e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white block",children:"Grand Total"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-emerald-600 font-bold uppercase tracking-widest bg-emerald-50 dark:bg-emerald-900/20 px-2 py-0.5 rounded-md",children:[e.jsx(D,{className:"w-3 h-3"}),"Secure Checkout"]})]}),e.jsxs("span",{className:"text-3xl font-black text-blue-600 dark:text-blue-400 tracking-tighter",children:["₹ ",Number(c||0).toFixed(2)]})]})})]})]})})},te=({onPaymentMethodChange:d})=>{const[t,p]=o.useState(""),[r,x]=o.useState(""),i=[{label:"Pay Online",value:"online",icon:e.jsx(I,{className:"w-5 h-5"}),description:"Cards, Net Banking, Wallet"},{label:"Cash on Delivery",value:"cod",icon:e.jsx(L,{className:"w-5 h-5"}),description:"Pay when you receive"}],u=[{label:"Razorpay",value:"razorpay",img:_},{label:"Wallet",value:"card",img:$}],n=a=>{p(a),x(""),d==null||d({paymentMethod:a,onlinePaymentMethod:""})},c=a=>{x(a),d==null||d({paymentMethod:"online",onlinePaymentMethod:a})};return e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2rem] border border-gray-100 dark:border-gray-800 p-6 sm:p-8 shadow-sm transition-all duration-300",children:[e.jsx("div",{className:"space-y-4",children:i.map(a=>e.jsxs("div",{onClick:()=>n(a.value),className:`relative flex items-start gap-4 p-5 rounded-2xl border-2 cursor-pointer transition-all duration-300 ${t===a.value?"border-blue-500 bg-blue-50/50 dark:bg-blue-900/10":"border-gray-50 dark:border-gray-800 hover:border-gray-200 dark:hover:border-gray-700 bg-gray-50/30 dark:bg-gray-800/20"}`,children:[e.jsx("div",{className:`p-3 rounded-xl ${t===a.value?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-400"}`,children:a.icon}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsx("span",{className:`font-bold ${t===a.value?"text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:a.label}),t===a.value&&e.jsx(A,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.description})]})]},a.value))}),t==="online"&&e.jsxs("div",{className:"mt-8 animate-fadeIn",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-4 ml-1",children:"Select Service Provider"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:u.map(a=>e.jsxs("div",{onClick:()=>c(a.value),className:`relative group cursor-pointer border-2 p-4 rounded-2xl flex flex-col items-center gap-3 transition-all duration-300 ${r===a.value?"border-blue-500 bg-blue-50/50 dark:bg-blue-900/10":"border-gray-50 dark:border-gray-800 hover:border-blue-100 dark:hover:border-gray-700 bg-gray-50/30 dark:bg-gray-800/20"}`,children:[e.jsx("div",{className:"w-full h-12 flex items-center justify-center",children:e.jsx("img",{src:a.img,alt:a.label,className:"max-h-full max-w-full object-contain filter dark:brightness-110 grayscale group-hover:grayscale-0 transition-all"})}),e.jsx("span",{className:`text-xs font-bold ${r===a.value?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`,children:a.label}),r===a.value&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-600 text-white rounded-full p-0.5 shadow-lg border-2 border-white dark:border-gray-900",children:e.jsx(A,{className:"w-3.5 h-3.5"})})]},a.value))})]})]})},re=({onCouponApply:d,orderTotal:t})=>{const p=O(),{productId:r}=p.state||{},{currentUser:x}=V(m=>m.user),{data:i=[],isLoading:u}=Q(r,{skip:!r}),[n,{isLoading:c}]=X(),[a,s]=o.useState(""),[b,j]=o.useState(null),f=async m=>{var w;const N=m||a;if(!N||typeof N!="string"||N.trim()===""){k.error("Please enter a valid coupon code.");return}try{const g=await n({couponCode:N,userId:x==null?void 0:x.id,purchaseAmount:t}).unwrap();g.success&&(j(g.coupon),s(g.coupon.code),d(g.coupon),k.success(`Coupon applied! Saved ₹${g.coupon.potentialDiscount}`))}catch(g){console.error("Coupon validation failed:",g),k.error(((w=g==null?void 0:g.data)==null?void 0:w.message)||"Invalid or expired coupon"),j(null),d(null)}},h=()=>{j(null),s(""),d(null)};return e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-[2rem] border border-gray-100 dark:border-gray-800 p-6 sm:p-8 shadow-sm transition-all duration-300",children:b?e.jsxs("div",{className:"relative overflow-hidden bg-emerald-50 dark:bg-emerald-900/10 border-2 border-emerald-500 rounded-2xl p-5 animate-fadeIn",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2",children:e.jsx("button",{onClick:h,className:"p-1.5 hover:bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 rounded-full transition-colors",children:e.jsx(H,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-emerald-500 text-white rounded-xl shadow-lg shadow-emerald-500/20",children:e.jsx(T,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-widest",children:"Coupon Applied"}),e.jsx("h3",{className:"text-xl font-black text-emerald-900 dark:text-white uppercase",children:b.code}),e.jsxs("p",{className:"text-sm font-medium text-emerald-700 dark:text-emerald-300",children:["You just saved ",e.jsxs("span",{className:"font-bold",children:["₹",b.potentialDiscount.toFixed(2)]})]})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:a,onChange:m=>s(m.target.value.toUpperCase()),placeholder:"Voucher or Coupon Code",className:"w-full px-5 py-4 bg-gray-50 dark:bg-gray-800/50 border-2 border-transparent focus:border-blue-500 dark:focus:border-blue-400 rounded-2xl text-gray-900 dark:text-white transition-all duration-300 focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-600 uppercase font-bold tracking-wider shadow-sm",disabled:c}),e.jsx("button",{onClick:()=>f(),disabled:c||!a,className:"absolute right-2 top-2 bottom-2 bg-blue-600 text-white px-6 rounded-xl hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 font-bold",children:c?"...":"Apply"})]}),!u&&i.length>0&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest",children:"Recommended Offers"}),e.jsx(K,{className:"w-4 h-4 text-gray-300"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[160px] overflow-y-auto pr-2 custom-scrollbar",children:i.map(m=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/30 border border-gray-100 dark:border-gray-800 rounded-2xl hover:border-blue-200 dark:hover:border-gray-700 cursor-pointer group transition-all duration-300",onClick:()=>f(m.couponCode),children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-black text-gray-800 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors uppercase",children:m.couponCode}),e.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-medium truncate max-w-[150px]",children:["Save up to ",m.discount,"% on this order"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-black bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2 py-1 rounded-lg uppercase tracking-wider",children:"Quick Apply"}),e.jsx(Y,{className:"w-4 h-4 text-gray-300 group-hover:text-blue-500 transition-colors"})]})]},m._id||m.id))})]}),u&&e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(E,{size:"sm"})})]})})},ie=()=>{const d=q(),[t,p]=o.useState(null),[r,x]=o.useState(null),[i,u]=o.useState({paymentMethod:"",onlinePaymentMethod:""}),[n,c]=o.useState(null),a=h=>{p(h)},s=h=>{x(h)},b=h=>{u(h)},j=h=>{c(h)},f=()=>{if(!t){k.info("Please select a shipping address.");return}if(!r){k.info("Please add items to your order.");return}if(!i.paymentMethod){k.info("Please select a payment method.");return}if(i.paymentMethod==="cod"&&(r==null?void 0:r.total)>2500){k.info("COD is not available for order greater than 2500");return}d("/proceed-to-payment",{state:{address:t,order:r,payment:i,coupon:n}})};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 py-12 px-4 sm:px-6 lg:px-8 transition-colors duration-300",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tight",children:"Checkout"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Complete your purchase by providing delivery and payment details."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[e.jsx("div",{className:"lg:col-span-7 space-y-10",children:e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(J,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Delivery & Items"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(ee,{onAddressSelect:a}),e.jsx(ae,{onOrderChange:s,address:t,coupon:n})]})]})}),e.jsx("div",{className:"lg:col-span-5",children:e.jsxs("div",{className:"sticky top-32",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] border border-gray-100 dark:border-gray-800 p-6 sm:p-10 shadow-sm space-y-10",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Offers & Discounts"})]}),e.jsx(re,{onCouponApply:j,orderTotal:r==null?void 0:r.total})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(I,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Payment Method"})]}),e.jsx(te,{onPaymentMethodChange:b})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("button",{onClick:f,className:"w-full bg-blue-600 text-white py-5 rounded-[2rem] font-bold text-lg hover:bg-blue-500 transition-all duration-300 shadow-xl shadow-blue-600/20 active:scale-[0.98]",children:"Proceed to Payment"}),e.jsx("p",{className:"text-center text-[10px] text-gray-400 dark:text-gray-500 mt-6 uppercase tracking-widest font-bold",children:"Encrypted & Secure Transaction"})]})]}),e.jsxs("p",{className:"text-center text-xs text-gray-400 dark:text-gray-500 mt-6 px-10 leading-relaxed",children:["By proceeding, you agree to our ",e.jsx("span",{className:"text-blue-500 font-medium cursor-pointer",children:"Terms of Service"})," and ",e.jsx("span",{className:"text-blue-500 font-medium cursor-pointer",children:"Privacy Policy"}),"."]})]})})]})]})})};export{ie as default};
