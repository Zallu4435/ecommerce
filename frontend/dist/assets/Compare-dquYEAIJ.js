import{u as w,j as e,F as f,b as j,c as p,r as v,g as k,d as N,h as C,i as I,L as A,f as R,B as y,v as F,k as M}from"./index-DNwfBDY0.js";const P=({compareItem:x,handleAddToCart:a,handleRemoveProduct:s,isAdding:g,cartData:l=[]})=>{const o=w(),b=t=>o(`/product/${t}`),u=(t,h)=>{const d=!t.stockQuantity||t.stockQuantity===0,n=l==null?void 0:l.some(r=>r.productId===t.productId),i=t.stockQuantity<5&&t.stockQuantity>0;return e.jsxs("div",{className:`border p-4 rounded-lg shadow-lg hover:shadow-xl mb-10 transition-all bg-white dark:bg-gray-800 ${h===2?"lg:col-span-1 lg:mx-auto md:ml-[160px] md:w-[400px] lg:w-full":""}`,children:[e.jsx("img",{src:t.productImage,alt:t.productName,className:"w-full h-64 object-cover cursor-pointer rounded-md mb-4",onClick:()=>b(t==null?void 0:t.productId)}),e.jsx("h2",{className:"text-xl font-bold text-gray-600 dark:text-gray-200 mb-2",children:t.productName.toUpperCase()}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:t.description}),e.jsx("div",{className:"mb-3",children:d?e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 rounded-md text-sm font-semibold",children:"Out of Stock"}):i?e.jsxs("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 rounded-md text-sm font-semibold",children:["Only ",t.stockQuantity," left"]}):e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 rounded-md text-sm font-semibold",children:"In Stock"})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-600 dark:text-gray-200",children:["₹ ",t.originalPrice.toFixed(2)]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("div",{className:"flex items-center mr-2",children:[...Array(5)].map((r,c)=>{const m=t==null?void 0:t.averageRating;return c<Math.floor(m)?e.jsx(f,{className:"text-yellow-500 text-sm"},c):c<Math.ceil(m)&&m%1!==0?e.jsx(j,{className:"text-yellow-500 text-sm"},c):e.jsx(p,{className:"text-gray-300 text-sm"},c)})}),e.jsx("div",{className:"flex flex-col items-start",children:e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",(t==null?void 0:t.reviewCount)||0," reviews)"]})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{onClick:()=>s(t.productId),className:"w-full bg-red-400 text-white py-2 rounded-md hover:bg-red-500 transition",children:"Remove from Compare"}),e.jsx("button",{onClick:()=>a(t.productId),disabled:g||d||n,className:`w-full py-2 rounded-md font-semibold transition-all duration-200 ${d?"bg-gray-300 text-gray-500 cursor-not-allowed":n?"bg-yellow-500 text-white cursor-not-allowed":"bg-blue-400 text-white hover:bg-blue-500 transform hover:scale-105"}`,children:g?"Adding...":d?"Out of Stock":n?"In Cart":"Add to Cart"})]})]},t.productId)};return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map((t,h)=>u(t,h))})},S=({compareItem:x})=>e.jsxs("div",{className:"mt-16 overflow-x-auto hidden lg:block md:block",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Comparison Table"}),e.jsxs("table",{className:"table-auto w-full border-collapse border dark:bg-gray-800 border-gray-300 dark:border-gray-700 text-sm sm:text-base",children:[e.jsx("thead",{className:"bg-gray-200 dark:bg-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 text-left text-gray-800 dark:text-gray-100",children:"Feature"}),x.map(a=>e.jsx("th",{className:"py-3 px-4 text-center text-gray-800 dark:text-gray-100",children:a.productName.toUpperCase()},a.productId))]})}),e.jsx("tbody",{children:["Price","Rating","Description","Reviews"].map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-800 dark:text-gray-100",children:a}),x.map(s=>e.jsx("td",{className:"py-3 px-4 text-center font-bold text-gray-600 dark:text-gray-200",children:a==="Price"?`₹ ${s.originalPrice.toFixed(2)}`:a==="Rating"?e.jsx("div",{className:"flex items-center justify-center",children:[...Array(5)].map((g,l)=>{const o=(s==null?void 0:s.averageRating)||0;return l<Math.floor(o)?e.jsx(f,{className:"text-yellow-500 text-sm"},l):l<Math.ceil(o)&&o%1!==0?e.jsx(j,{className:"text-yellow-500 text-sm"},l):e.jsx(p,{className:"text-gray-300 text-sm"},l)})}):a==="Reviews"?e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("span",{className:"text-sm text-gray-500",children:["(",(s==null?void 0:s.reviewCount)||0," reviews)"]})}):s.description},s.productId))]},a))})]})]}),Q=()=>{const[x,a]=v.useState(!1),{data:s=[],isLoading:g,isError:l}=k(),{data:o=[]}=N(),[b]=C(),[u]=I();if(g)return e.jsx(A,{});if(l)return e.jsx("div",{children:"Error fetching comparison list"});const t=async n=>{const i=s.find(m=>m.productId===n);if(!i){y.error("Product not found");return}const r=F({product:i,cartData:o,stockQuantity:i.stockQuantity});if(!r.valid)return;const c={productId:n,quantity:1};try{a(!0),await b(c),await u(n),y.success(`Item moved to cart successfully! ${r.warning||""}`)}catch(m){M(m,"add item to cart")}finally{a(!1)}},h=async n=>{var i;try{const r=await u(n);(i=r==null?void 0:r.data)!=null&&i.comparison?y.success("Product removed from comparison:",r.data.comparison):y.error("Error removing product from comparison")}catch(r){y.error("Error:",r.message)}},d=!s||s.length===0;return e.jsxs("div",{className:"p-6 bg-gray-50 my-10 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen",children:[!d&&e.jsx("h1",{className:"text-3xl font-bold text-center text-gray-600 dark:text-gray-200 mb-8",children:"Product Comparison"}),d?e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col items-center justify-center py-24 px-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-purple-50 dark:bg-gray-700 flex items-center justify-center shadow-inner",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-10 h-10 text-purple-600 dark:text-purple-400",children:e.jsx("path",{d:"M3.75 6.75A1.5 1.5 0 015.25 5.25h13.5a1.5 1.5 0 011.5 1.5v10.5a1.5 1.5 0 01-1.5 1.5H5.25a1.5 1.5 0 01-1.5-1.5V6.75zm3 1.5a.75.75 0 000 1.5h10.5a.75.75 0 000-1.5H6.75zM6 12a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H6.75A.75.75 0 016 12zm.75 3.75a.75.75 0 000 1.5h7.5a.75.75 0 000-1.5h-7.5z"})})}),e.jsx("h2",{className:"mt-6 text-2xl font-semibold text-gray-800 dark:text-gray-100",children:"Your comparison list is empty"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400 max-w-md text-center",children:"Compare features and prices side by side. Add products to start comparing."}),e.jsx("div",{className:"mt-6",children:e.jsxs(R,{to:"/shop",className:"inline-flex items-center gap-2 px-5 py-3 rounded-md bg-blue-600 text-white hover:bg-blue-700 transition-all transform hover:scale-105 dark:bg-blue-700 dark:hover:bg-blue-600",children:["Browse products",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{compareItem:s,handleAddToCart:t,handleRemoveProduct:h,isAdding:x,cartData:o}),e.jsx(S,{compareItem:s})]})]})};export{Q as default};
