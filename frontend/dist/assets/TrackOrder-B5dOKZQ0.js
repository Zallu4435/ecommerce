import{u as y,ag as f,aD as j,aE as v,j as e,aF as x,aG as n,aA as g,aH as N,aI as w,aJ as S,aK as P}from"./index-DNwfBDY0.js";import{A as m}from"./arrow-left-CUel7EGd.js";const L=()=>{const b=y(),{state:u}=f(),{order:r}=u||{},{refetch:C}=j(),[D]=v();if(!r)return e.jsx("div",{className:"text-center mt-20 text-xl font-semibold",children:"Order not found!"});const s=[{label:"Order Placed",shortLabel:"Placed",icon:e.jsx(w,{})},{label:"Processing",shortLabel:"Processing",icon:e.jsx(S,{})},{label:"Shipped",shortLabel:"Shipped",icon:e.jsx(x,{})},{label:"Out for Delivery",shortLabel:"Delivery",icon:e.jsx(P,{})},{label:"Delivered",shortLabel:"Delivered",icon:e.jsx(g,{})},{label:"Cancelled",shortLabel:"Cancelled",icon:e.jsx(n,{}),cancel:!0},{label:"Payment Failed",shortLabel:"Failed",icon:e.jsx(n,{}),failed:!0}],c=s.findIndex(a=>a.label===r.Status),h=()=>{const a=r.originalStatus||r.Status,t={Delivered:"text-emerald-700 bg-emerald-50 dark:bg-emerald-900/30 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-800",Shipped:"text-blue-700 bg-blue-50 dark:bg-blue-900/30 dark:text-blue-400 border border-blue-100 dark:border-blue-800","Out for Delivery":"text-indigo-700 bg-indigo-50 dark:bg-indigo-900/30 dark:text-indigo-400 border border-indigo-100 dark:border-indigo-800",Processing:"text-amber-700 bg-amber-50 dark:bg-amber-900/30 dark:text-amber-400 border border-amber-100 dark:border-amber-800",Packed:"text-amber-700 bg-amber-50 dark:bg-amber-900/30 dark:text-amber-400 border border-amber-100 dark:border-amber-800",Confirmed:"text-violet-700 bg-violet-50 dark:bg-violet-900/30 dark:text-violet-400 border border-violet-100 dark:border-violet-800","Order Placed":"text-slate-600 bg-slate-100 dark:bg-slate-800 dark:text-slate-400 border border-slate-200 dark:border-slate-700",Pending:"text-slate-600 bg-slate-100 dark:bg-slate-800 dark:text-slate-400 border border-slate-200 dark:border-slate-700",Cancelled:"text-red-700 bg-red-50 dark:bg-red-900/30 dark:text-red-400 border border-red-100 dark:border-red-800",Returned:"text-orange-700 bg-orange-50 dark:bg-orange-900/30 dark:text-orange-400 border border-orange-100 dark:border-orange-800","Return Requested":"text-orange-700 bg-orange-50 dark:bg-orange-900/30 dark:text-orange-400 border border-orange-100 dark:border-orange-800",Refunded:"text-teal-700 bg-teal-50 dark:bg-teal-900/30 dark:text-teal-400 border border-teal-100 dark:border-teal-800","Payment Failed":"text-red-700 bg-red-50 dark:bg-red-900/30 dark:text-red-400 border border-red-100 dark:border-red-800"};return t[a]||t[r.Status]||"text-gray-600 bg-gray-50 border border-gray-100"};r.Quantity;const k=r.TotalAmount;r.CouponDiscount?Math.round(r.Subtotal-r.CouponDiscount):r.Subtotal;const p=a=>`ORD-${a.slice(0,6).toUpperCase()}`;return e.jsx("div",{className:"max-w-7xl mx-auto pt-32 pb-16 px-4 sm:px-6 lg:px-8 min-h-screen",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:()=>b(-1),className:"group flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-6 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-all w-fit",children:[e.jsx(m,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"font-medium",children:"Back to Order Details"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight mb-2",children:"Track Shipment"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Order ID: ",e.jsx("span",{className:"font-mono font-medium text-gray-900 dark:text-gray-200",children:r.orderId||p(r._id)})]})]}),e.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-bold shadow-sm self-start sm:self-center ${h()}`,children:r.Status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl p-8 shadow-sm border border-gray-100 dark:border-gray-800",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-8 flex items-center gap-3",children:[e.jsx("span",{className:"p-2 bg-blue-50 dark:bg-blue-900/30 rounded-xl",children:e.jsx(x,{className:"text-blue-600 dark:text-blue-400"})}),"Tracking History"]}),e.jsx("div",{className:"relative pl-4 sm:pl-6",children:s.filter(a=>a.cancel||a.failed?a.label===r.Status:!0).map((a,t)=>{const d=t<=c,l=t===c,o=a.failed||a.cancel;return e.jsxs("div",{className:"relative pb-10 last:pb-0",children:[t<s.filter(i=>!(i.cancel||i.failed)||i.label===r.Status).length-1&&e.jsx("div",{className:`absolute top-8 left-[15px] sm:left-[19px] w-0.5 h-[calc(100%-20px)] ${d&&!o?"bg-blue-500":"bg-gray-200 dark:bg-gray-700"}`}),e.jsxs("div",{className:"flex gap-4 sm:gap-6",children:[e.jsx("div",{className:`relative z-10 flex items-center justify-center flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 rounded-full border-4 ${l&&o?"bg-red-500 border-red-100 dark:border-red-900":d?"bg-blue-600 border-blue-100 dark:border-blue-900":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:d?o?e.jsx(n,{className:"text-white text-sm"}):e.jsx(g,{className:"text-white text-sm"}):e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300 dark:bg-gray-600"})}),e.jsxs("div",{className:`${d?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-500"} pt-1`,children:[e.jsx("h3",{className:`font-bold text-base sm:text-lg ${l?"text-blue-600 dark:text-blue-400":""}`,children:a.label}),e.jsxs("p",{className:"text-sm mt-1 mb-2 max-w-xs leading-relaxed opacity-80",children:[a.label==="Order Placed"&&"We have received your order.",a.label==="Processing"&&"We are preparing your items.",a.label==="Shipped"&&"Your order is on the way.",a.label==="Out for Delivery"&&"Agent is out to deliver.",a.label==="Delivered"&&"Package delivered successfully.",a.label==="Cancelled"&&"This order was cancelled.",a.label==="Payment Failed"&&"Transaction was unsuccessful."]}),l&&e.jsx("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:"Current Status"})]})]})]},t)})})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl p-6 shadow-sm border border-gray-100 dark:border-gray-800 sticky top-4",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 text-lg",children:"Item Details"}),e.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden bg-gray-100 dark:bg-gray-800 mb-6 relative group",children:[e.jsx("img",{src:r.ProductImage||"/placeholder.svg",alt:r.ProductName,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),e.jsxs("div",{className:"absolute bottom-3 left-3 bg-white/90 dark:bg-black/80 backdrop-blur-sm px-3 py-1.5 rounded-lg text-sm font-bold text-gray-900 dark:text-white shadow-sm",children:["x",r.Quantity," Units"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg leading-tight",children:r.ProductName}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-t border-gray-100 dark:border-gray-800",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total Price"}),e.jsxs("span",{className:"font-bold text-xl text-gray-900 dark:text-white",children:["â‚¹",k]})]}),r.deliveryDate&&r.Status!=="Cancelled"&&r.Status!=="Payment Failed"&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-xl border border-green-100 dark:border-green-800/30",children:[e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 font-bold uppercase tracking-wide mb-1",children:"Expected Delivery"}),e.jsx("p",{className:"text-green-800 dark:text-green-200 font-medium",children:r.deliveryDate})]})]})]})})]}),r.Status==="Payment Failed"&&e.jsx("div",{className:"mt-8 bg-red-50 dark:bg-red-900/10 rounded-3xl p-8 border border-red-100 dark:border-red-900/30",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center flex-shrink-0 text-red-600 dark:text-red-400 text-xl",children:e.jsx(N,{})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Payment Required"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 max-w-2xl",children:"This order's payment failed. Please go to your orders page to retry payment for the complete order."}),e.jsxs("button",{onClick:()=>b("/profile/order"),className:"flex items-center gap-2 bg-gray-900 dark:bg-white text-white dark:text-gray-900 px-8 py-3 rounded-xl font-bold hover:opacity-90 transition-opacity shadow-lg shadow-gray-200 dark:shadow-none",children:[e.jsx("span",{children:"Go to Orders"}),e.jsx(m,{className:"rotate-180"})]})]})]})})]})})};export{L as default};
