import{am as S,u as A,r as N,bg as C,aW as I,bA as E,H as U,j as e,L,I as T,B as m}from"./index-DNwfBDY0.js";import{c as F}from"./categoryFormValidation-CWFdV7NR.js";import{I as o,L as i,a as n,T as P}from"./StyledComponents-BbiIQNic.js";import{A as B}from"./arrow-left-CUel7EGd.js";import{U as V}from"./upload-D2_odXxp.js";import"./tslib.es6-D2mrdk48.js";const q=()=>{const{id:x}=S(),y=A(),[f,h]=N.useState(!1),[k]=C(),{refetch:w}=I(),{data:t,error:u,isLoading:v}=E(x),{register:s,handleSubmit:D,setValue:a,formState:{errors:c}}=U({resolver:T(F)});N.useEffect(()=>{var l,g,d,r,p,b,j;t&&(a("categoryName",(l=t==null?void 0:t.category)==null?void 0:l.categoryName),a("categoryOffer",(g=t==null?void 0:t.category)==null?void 0:g.categoryOffer),a("categoryDescription",(d=t==null?void 0:t.category)==null?void 0:d.categoryDescription),a("offerName",((r=t==null?void 0:t.category)==null?void 0:r.offerName)||""),a("isOfferActive",((p=t==null?void 0:t.category)==null?void 0:p.isOfferActive)||!1),(b=t==null?void 0:t.category)!=null&&b.startDate&&a("startDate",new Date(t.category.startDate).toISOString().split("T")[0]),(j=t==null?void 0:t.category)!=null&&j.endDate&&a("endDate",new Date(t.category.endDate).toISOString().split("T")[0]))},[t,a]);const O=async(l,g)=>{var d;g.preventDefault(),h(!0);try{const r=await k({entity:"category",data:l,id:x}).unwrap();if(r!=null&&r.error){m.error(r.error.message);return}w(),m.success("Category updated successfully"),y(-1)}catch(r){m.error(((d=r==null?void 0:r.data)==null?void 0:d.message)||"An error occurred while updating the category")}finally{h(!1)}};return v?e.jsx(L,{}):u?e.jsxs("div",{children:["Error: ",u.message]}):e.jsx("div",{className:"dark:bg-black min-h-screen flex mt-10 items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-[1000px] dark:bg-gray-900 bg-orange-50 p-6 md:p-8 shadow-md",children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-6 dark:text-gray-400 text-gray-700",children:"Update Category"}),e.jsxs("button",{onClick:()=>y(-1),className:"flex items-center text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white",children:[e.jsx(B,{className:"mr-2"}),e.jsx("span",{children:"Back to Products"})]})]}),e.jsxs("form",{onSubmit:D(O),children:[e.jsxs(o,{children:[e.jsx(i,{className:"text-gray-700 dark:text-white",children:"Category Name *"}),e.jsx(n,{type:"text",placeholder:"Enter Category Name",...s("categoryName"),className:"dark:text-white dark:bg-gray-800"}),c.categoryName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.categoryName.message})]}),e.jsxs("div",{className:"border border-gray-300 dark:border-gray-700 p-4 rounded-md mb-6 bg-white dark:bg-gray-800/50",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-orange-600 dark:text-orange-500 border-b border-gray-200 dark:border-gray-700 pb-2",children:"Promo Offer Details"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs(o,{children:[e.jsx(i,{className:"text-gray-700 dark:text-white",children:"Offer Name"}),e.jsx(n,{type:"text",placeholder:"e.g. Summer Sale",...s("offerName"),className:"dark:text-white dark:bg-gray-800"})]}),e.jsxs(o,{children:[e.jsx(i,{className:"text-gray-700 dark:text-white",children:"Discount Percentage (%)"}),e.jsx(n,{type:"number",placeholder:"0",...s("categoryOffer"),className:"dark:text-white dark:bg-gray-800"}),c.categoryOffer&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.categoryOffer.message})]}),e.jsxs(o,{children:[e.jsx(i,{className:"text-gray-700 dark:text-white",children:"Valid From"}),e.jsx(n,{type:"date",...s("startDate"),className:"dark:text-white dark:bg-gray-800"})]}),e.jsxs(o,{children:[e.jsx(i,{className:"text-gray-700 dark:text-white",children:"Valid To"}),e.jsx(n,{type:"date",...s("endDate"),className:"dark:text-white dark:bg-gray-800"})]})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("input",{type:"checkbox",id:"isOfferActive",...s("isOfferActive"),className:"w-5 h-5 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500"}),e.jsx(i,{htmlFor:"isOfferActive",className:"ml-2 mb-0 cursor-pointer text-gray-700 dark:text-white",children:"Activate Offer"})]})]}),e.jsxs(o,{children:[e.jsx(i,{className:"text-gray-700 dark:text-white",children:"Category Description *"}),e.jsx(P,{placeholder:"Write your category description here",...s("categoryDescription"),rows:"5",className:"dark:text-white dark:bg-gray-800"}),c.categoryDescription&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.categoryDescription.message})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{type:"submit",disabled:f,className:"w-full dark:bg-blue-600 bg-orange-500 text-white px-6 py-3 rounded-md dark:hover:bg-blue-700 hover:bg-orange-600 flex items-center justify-center font-bold text-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(V,{className:"mr-2"}),f?"Updating...":"Update Category"]})})]})]})})};export{q as default};
