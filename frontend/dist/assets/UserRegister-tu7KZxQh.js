import{S as t,u as E,j as e,ac as F,r as x,ad as I,H as U,a9 as p,aa as y,f as A,I as R,B as z}from"./index-DNwfBDY0.js";import{I as n,L as d,a as i}from"./StyledComponents-BbiIQNic.js";import{u as B}from"./usePreventBodyScroll-D2l0Zfsl.js";import"./tslib.es6-D2mrdk48.js";const D=/^(?!.*([\uD83C-\uDBFF\uDC00-\uDFFF]|[\u2600-\u27BF])).*$/,G=/^[ -~]+$/,L=t.string().trim().min(3,{message:"Username must be at least 3 characters"}).max(20,{message:"Username must not exceed 20 characters"}).regex(/^[A-Za-z][A-Za-z0-9_.-]*$/,{message:"Start with a letter; only letters, numbers, dot, dash, underscore"}).regex(D,{message:"Username cannot include emojis"}),M=t.string().trim().min(1,{message:"Email is required"}).max(254,{message:"Email is too long"}).email({message:"Invalid email address"}),$=t.string().trim().regex(/^\+?[0-9]{10,15}$/,{message:"Enter a valid phone number"}),O=t.string().min(8,{message:"Password must be at least 8 characters"}).max(64,{message:"Password must not exceed 64 characters"}).regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\w\s])[ -~]+$/,{message:"Password must include upper, lower, number and symbol, and contain no spaces or emojis"}).regex(G,{message:"Password cannot contain emojis or non-ASCII"}),H=t.object({username:L,email:M,phone:$,password:O,confirmPassword:t.string(),referralCode:t.string().optional()}).refine(a=>a.password===a.confirmPassword,{path:["confirmPassword"],message:"Passwords do not match"}),Z=({isOpen:a,onClose:c})=>{const r=E();B(a);const g=()=>{c(),r("/")},l=()=>{c(),r("/login")};return a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"relative w-full max-w-md rounded-2xl bg-white dark:bg-gray-800 shadow-xl ring-1 ring-gray-200 dark:ring-gray-700",children:[e.jsxs("div",{className:"px-6 pt-6 pb-4 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 inline-flex items-center justify-center rounded-full bg-blue-50 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400 w-12 h-12",children:e.jsx(F,{className:"w-7 h-7"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Signup successful"}),e.jsx("p",{className:"mt-2 text-sm md:text-base text-gray-700 dark:text-gray-300",children:"Your account has been created. Please check your Gmail for the activation link."})]}),e.jsxs("div",{className:"px-6 pb-6 pt-2 flex justify-center gap-3",children:[e.jsx("button",{onClick:l,className:"inline-flex items-center justify-center rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-700 px-5 py-2.5 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:"Go to login"}),e.jsx("button",{onClick:g,className:"inline-flex items-center justify-center rounded-md bg-blue-600 hover:bg-blue-700 text-white px-5 py-2.5 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:"Go to home"})]})]})})},_=()=>{const[a,c]=x.useState(!1),[r,g]=x.useState(!1),[l,w]=x.useState(!1),[j]=I(),[h,u]=x.useState(""),{register:o,handleSubmit:N,reset:k,formState:{errors:s,isSubmitting:b}}=U({resolver:R(H)}),v=async(C,S)=>{var f;S.preventDefault();try{await j(C).unwrap(),z.info("Check your Gmail for the link to access your account!"),c(!0)}catch(m){(f=m==null?void 0:m.data)!=null&&f.message?u(m.data.message):u("An unexpected error occurred. Please try again."),setTimeout(()=>{u(null)},5e3)}k()},P=()=>{c(!1)};return e.jsxs("div",{className:"dark:bg-gray-900 bg-gray-50 flex items-center justify-center min-h-screen",children:[e.jsxs("div",{className:"w-[90%] sm:w-full lg:w-[50%] my-20 dark:bg-gray-800 bg-white md:p-8 p-4 rounded-md shadow-lg",children:[e.jsx("h1",{className:"text-2xl sm:text-xl md:text-2xl font-bold mb-6 dark:text-gray-100 text-gray-800 text-center",children:"User Register"}),h&&e.jsx("p",{className:"text-red-400 font-bold text-sm mb-3 mt-[-5px]",children:h}),e.jsxs("form",{onSubmit:N(v),children:[e.jsxs("div",{className:"flex flex-col sm:flex-col md:flex-row md:gap-4 md:mb-4",children:[e.jsxs(n,{className:"flex-1",children:[e.jsx(d,{className:"dark:text-gray-100 text-gray-800",children:"Username"}),e.jsx(i,{type:"text",...o("username"),placeholder:"Enter username",className:"w-full p-3 rounded-md border dark:bg-gray-700 dark:border-gray-600 text-sm sm:text-base"}),s.username&&e.jsx("p",{className:"text-red-500",children:s.username.message})]}),e.jsxs(n,{className:"flex-1",children:[e.jsx(d,{className:"dark:text-gray-100 text-gray-800",children:"Phone"}),e.jsx(i,{type:"tel",...o("phone"),placeholder:"Enter phone number",className:"w-full p-3 rounded-md border dark:bg-gray-700 dark:border-gray-600 text-sm sm:text-base"}),s.phone&&e.jsx("p",{className:"text-red-500",children:s.phone.message})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(n,{children:[e.jsx(d,{className:"dark:text-gray-100 text-gray-800",children:"Email"}),e.jsx(i,{type:"email",...o("email"),placeholder:"Enter email",className:"w-full p-3 rounded-md border dark:bg-gray-700 dark:border-gray-600 text-sm sm:text-base"}),s.email&&e.jsx("p",{className:"text-red-500",children:s.email.message})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-col md:flex-row gap-4 lg:mb-6 mb-2",children:[e.jsxs(n,{className:"flex-1",children:[e.jsx(d,{className:"dark:text-gray-100 text-gray-800",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{type:r?"text":"password",...o("password"),placeholder:"Enter password",className:"w-full p-3 pr-10 rounded-md border dark:bg-gray-700 dark:border-gray-600 text-sm sm:text-base"}),e.jsx("button",{type:"button",onClick:()=>g(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 focus:outline-none","aria-label":r?"Hide password":"Show password",children:r?e.jsx(p,{className:"w-5 h-5"}):e.jsx(y,{className:"w-5 h-5"})})]}),s.password&&e.jsx("p",{className:"text-red-500",children:s.password.message})]}),e.jsxs(n,{className:"flex-1",children:[e.jsx(d,{className:"dark:text-gray-100 text-gray-800",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{type:l?"text":"password",...o("confirmPassword"),placeholder:"Confirm password",className:"w-full p-3 pr-10 rounded-md border dark:bg-gray-700 dark:border-gray-600 text-sm sm:text-base"}),e.jsx("button",{type:"button",onClick:()=>w(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 focus:outline-none","aria-label":l?"Hide confirm password":"Show confirm password",children:l?e.jsx(p,{className:"w-5 h-5"}):e.jsx(y,{className:"w-5 h-5"})})]}),s.confirmPassword&&e.jsx("p",{className:"text-red-500",children:s.confirmPassword.message})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(n,{children:[e.jsx(d,{className:"dark:text-gray-100 text-gray-800",children:"Referral Code (Optional)"}),e.jsx(i,{type:"text",...o("referralCode"),placeholder:"Enter referral code",className:"w-full p-3 rounded-md border dark:bg-gray-700 dark:border-gray-600 text-sm sm:text-base uppercase tracking-wider"}),s.referralCode&&e.jsx("p",{className:"text-red-500",children:s.referralCode.message})]})}),e.jsx("button",{type:"submit",disabled:b,className:"w-full py-3 font-bold dark:bg-blue-600 bg-blue-500 text-white rounded-md dark:hover:bg-blue-700 hover:bg-blue-600 transition duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",children:b?"Submitting...":"Register"})]}),e.jsxs("p",{className:"mt-4 text-center text-xs md:text-lg dark:text-gray-300 text-gray-600",children:["Already have an account?"," ",e.jsx(A,{to:"/login",className:"text-blue-500 dark:text-blue-400 hover:underline",children:"Login here"})]})]}),e.jsx(Z,{isOpen:a,onClose:P})]})};export{_ as default};
