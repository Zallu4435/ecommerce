import{h as v,r as u,u as w,d as N,j as e,v as C,B as m,k as I,l as A,m as S,L,f as E}from"./index-DNwfBDY0.js";const b=({item:s,onRemove:o})=>{const{originalPrice:n,productName:d,cartItemId:x,productImage:c,stockQuantity:t,productId:l}=s,[y]=v(),[i,g]=u.useState(!1),p=w(),{data:r=[]}=N(),h=async()=>{const a=C({product:s,cartData:r,stockQuantity:t});if(!a.valid)return;const k={productId:l,quantity:1};try{g(!0),await y(k),o(l),m.success(`Item moved to cart successfully! ${a.warning||""}`)}catch(f){I(f,"add item to cart")}finally{g(!1)}},j=()=>p(`/product/${l}`);return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"hidden md:table-row hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:[e.jsx("td",{className:"px-6 py-4 border-b text-center",children:e.jsx("button",{className:"text-red-500 hover:underline",onClick:()=>o(l),children:"❌ Remove"})}),e.jsxs("td",{className:"px-6 py-4 md:px-0 border-b flex items-center gap-4",children:[e.jsx("img",{src:c,className:"h-[60px] rounded-lg cursor-pointer object-cover",alt:d,onClick:j}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:d}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"⭐ 4.5 (200)"})]})]}),e.jsxs("td",{className:"px-6 py-4 border-b text-center text-gray-900 dark:text-gray-100",children:["₹ ",n.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 border-b text-center text-gray-900 dark:text-gray-100",children:t?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-md font-semibold",children:"In Stock"}):e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-md font-semibold",children:"Out of Stock"})}),e.jsx("td",{className:"px-6 py-4 border-b text-center",children:e.jsx("button",{onClick:h,disabled:i||!t||t===0||(r==null?void 0:r.some(a=>a.productId===l)),className:`px-4 py-2 rounded-lg font-semibold transition-all duration-200 ${!t||t===0?"bg-gray-300 text-gray-500 cursor-not-allowed":r!=null&&r.some(a=>a.productId===l)?"bg-yellow-500 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600 dark:bg-blue-700 dark:hover:bg-blue-600 transform hover:scale-105"}`,children:i?"Adding...":!t||t===0?"Out of Stock":r!=null&&r.some(a=>a.productId===l)?"In Cart":"Add to Cart"})})]}),e.jsxs("div",{className:"block md:hidden border rounded-lg p-4 mb-4 shadow-md bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{className:"text-red-500 font-semibold hover:underline",onClick:()=>o(x),children:"❌ Remove"}),e.jsxs("span",{className:"text-gray-900 dark:text-gray-100",children:["₹ ",n.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("img",{src:c,className:"h-[60px] rounded-lg object-cover",alt:d}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:d}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"⭐ 4.5 (200 reviews)"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"stockQuantity:"}),e.jsx("span",{children:t})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:h,disabled:i||!t||t===0||(r==null?void 0:r.some(a=>a.productId===l)),className:`px-6 py-2 rounded-lg font-semibold transition-all duration-200 ${!t||t===0?"bg-gray-300 text-gray-500 cursor-not-allowed":r!=null&&r.some(a=>a.productId===l)?"bg-yellow-500 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600 dark:bg-blue-700 dark:hover:bg-blue-600"}`,children:i?"Adding...":!t||t===0?"Out of Stock":r!=null&&r.some(a=>a.productId===l)?"In Cart":"Add to Cart"})})]})]})},F=({type:s,data:o,onRemove:n})=>e.jsxs("div",{className:"flex flex-col items-center justify-center m-4 md:m-10 bg-white dark:bg-gray-800 shadow-lg rounded-lg p-4 md:p-6",children:[s==="wishlist"&&e.jsx("h2",{className:"text-2xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 mb-4 md:mb-6 text-center",children:"Your Wishlist"}),e.jsx("div",{className:"overflow-x-auto w-full max-w-6xl hidden md:block",children:e.jsxs("table",{className:"w-full table-auto border-collapse border border-gray-300 dark:border-gray-700",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-center border-b font-bold bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-100",children:"Remove"}),e.jsx("th",{className:"px-6 py-4 text-left border-b bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-100",children:"Product"}),e.jsx("th",{className:"px-6 py-4 text-center border-b bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-100",children:"Price"}),e.jsx("th",{className:"px-6 py-4 text-center border-b bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-100",children:"stockQuantity"}),e.jsx("th",{className:"px-6 py-4 text-center border-b bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-100",children:"Subtotal"})]})}),e.jsx("tbody",{children:o.map(d=>e.jsx(b,{item:d,onRemove:n},d.id))})]})}),e.jsx("div",{className:"grid gap-6 w-full max-w-6xl mt-4 md:hidden px-4",children:o.map(d=>e.jsx(b,{item:d,onRemove:n},d.id))})]}),T=()=>{const{data:s=[],isLoading:o,isError:n}=A(),[d]=S(),x=async c=>{try{const t=await d(c);t&&t.status===200&&m.success("Removed product")}catch(t){console.error("Failed to remove product from wishlist",t)}};return u.useEffect(()=>{(s==null?void 0:s.length)>15&&m.error("You can only add up to 15 products in your wishlist. Please remove some before adding more.")},[s==null?void 0:s.length]),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen md:p-10 p-5",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[o&&e.jsx(L,{}),n&&e.jsx("div",{children:"Error fetching wishlist"}),(s==null?void 0:s.length)===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-24",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-blue-50 dark:bg-gray-700 flex items-center justify-center shadow-inner",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-10 h-10 text-blue-600 dark:text-blue-400",children:e.jsx("path",{d:"M11.645 20.91l-.007-.003-.022-.01a15.247 15.247 0 01-.383-.173 25.18 25.18 0 01-4.244-2.453C4.688 16.045 2.25 13.446 2.25 10.5 2.25 7.75 4.3 5.75 6.75 5.75c1.676 0 3.064.711 4 1.877C11.686 6.46 13.074 5.75 14.75 5.75c2.45 0 4.5 2 4.5 4.75 0 2.946-2.438 5.545-4.739 7.77a25.175 25.175 0 01-4.244 2.453 15.247 15.247 0 01-.383.173l-.022.01-.007.003a.75.75 0 01-.61 0z"})})}),e.jsx("h2",{className:"mt-6 text-2xl font-semibold text-gray-800 dark:text-gray-100",children:"Your wishlist is empty"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400 max-w-md text-center",children:"Save items you love to your wishlist to keep track of them and shop later."}),e.jsx("div",{className:"mt-6",children:e.jsxs(E,{to:"/shop",className:"inline-flex items-center gap-2 px-5 py-3 rounded-md bg-blue-600 text-white hover:bg-blue-700 transition-all transform hover:scale-105 dark:bg-blue-700 dark:hover:bg-blue-600",children:["Browse products",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})})]})})]}):e.jsx(F,{type:"wishlist",data:s,onRemove:x})]})})};export{T as default};
